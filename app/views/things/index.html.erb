<script type="text/javascript">
  Shopify.API.addMessageHandler(function(message, data){
    if(message == 'Shopify.API.initialize'){
      Shopify.API.Bar.setTitle("Thing Index");
    }
  });
</script>

<h1>Listing things</h1>

<table>
  <tr>
    <th>Title</th>
    <th>Description</th>
    <th></th>
    <th></th>
    <th></th>
  </tr>

<% @things.each do |thing| %>
  <tr>
    <td><%= thing.title %></td>
    <td><%= thing.description %></td>
    <td><%= link_to 'Show', thing %></td>
    <td><%= link_to 'Edit', edit_thing_path(thing) %></td>
    <td><%= link_to_function 'Destroy', "shopifyDeleteConfirm('#{thing_path(thing)}', 'Are you sure you want to delete this thing?')"%></td>
  </tr>
<% end %>
</table>

<br />


<%= button_to_function 'New Thing Modal', "newThingModal('#{new_thing_url}')" %>

<br /><br />
<h2>Test some of the other functions</h2>

<%= button_to_function "Spinner off", "Shopify.API.Bar.loadingOff()" %>
<%= button_to_function "Spinner on", "Shopify.API.Bar.loadingOn()" %>
<br />
<%= button_to_function "Test Alert", "Shopify.API.Modal.alert('This is a test message.')" %>
<br />
<%= button_to_function "Test Confirm", "Shopify.API.Modal.confirm('Are you sure you want to test message?')" %>
<br />
<%= button_to_function "Test Input", "Shopify.API.Modal.input('Please enter a bit of information.', function(data){ alert('Got back: ' + JSON.stringify(data)); })" %>
